@using Microsoft.AspNetCore.SignalR
@inject IHubContext<NotificationHub> HubContext

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Notification System</title>
    @await Html.PartialAsync("_ToastNotifications")
</head>
<body>
    <h2>Send Notification</h2>
    <form method="post" asp-action="SendNotification">
        <input type="text" name="message" placeholder="Enter your message" required />
        <button type="submit">Send</button>
    </form>

    <div id="notifications"></div>

    <script src="https://cdn.jsdelivr.net/npm/@microsoft/signalr@5.0.0/dist/browser/signalr.min.js"></script>
    <script>
        const connection = new signalR.HubConnectionBuilder()
            .withUrl("/notificationHub")
            .build();

        connection.on("ReceiveNotification", function (message) {
            const notificationDiv = document.createElement("div");
            notificationDiv.textContent = message;
            document.getElementById("notifications").appendChild(notificationDiv);
        });

        connection.start().catch(function (err) {
            return console.error(err.toString());
        });
    </script>
</body>
</html>